{"ast":null,"code":"/*!\n    *\n    * Wijmo Library 5.20231.904\n    * http://wijmo.com/\n    *\n    * Copyright(c) GrapeCity, Inc.  All rights reserved.\n    *\n    * Licensed under the GrapeCity Commercial License.\n    * sales@wijmo.com\n    * wijmo.com/products/wijmo-5/license/\n    *\n    */\n\nimport { EventEmitter, NgZone } from \"@angular/core\";\nimport * as wijmo from \"@grapecity/wijmo\";\nimport * as ɵngcc0 from '@angular/core';\nvar WjOptions = function () {\n  function WjOptions() {}\n  WjOptions.asyncBindings = !0;\n  return WjOptions;\n}();\nexport { WjOptions };\nvar WjComponentResolvedMetadata = function () {\n  function WjComponentResolvedMetadata(e) {\n    this.changeEventMap = [];\n    this.allImplEvents = [];\n    this.resolveChangeEventMap(e);\n  }\n  WjComponentResolvedMetadata.prototype.resolveChangeEventMap = function (e) {\n    var t = this.changeEventMap,\n      i = e.outputs,\n      r = e.changeEvents || {};\n    t.splice(0, t.length);\n    this.allImplEvents = [];\n    if (i && i.length) {\n      var n = i.map(function (e) {\n        return e.split(\":\");\n      }).map(function (e) {\n        return {\n          implName: e[0].trim(),\n          exposeName: e[1] && e[1].trim()\n        };\n      });\n      this.allImplEvents = n.map(function (e) {\n        return e.implName;\n      });\n      for (var o = 0, s = n.filter(function (e) {\n          return e.implName && e.exposeName;\n        }); o < s.length; o++) {\n        var a = s[o];\n        if (Ng2Utils.getWjEventName(a.implName)) {\n          var v = {\n              eventImpl: a.implName,\n              event: a.exposeName\n            },\n            h = r[a.exposeName];\n          h && h.length && (v.props = h.map(function (e) {\n            return {\n              prop: e,\n              evExposed: Ng2Utils.getChangeEventNameExposed(e),\n              evImpl: Ng2Utils.getChangeEventNameImplemented(e)\n            };\n          }));\n          t.push(v);\n        }\n      }\n      for (var c in r) if (c.indexOf(\".\") > -1) {\n        v = {\n          eventImpl: null,\n          event: c,\n          props: r[c].map(function (e) {\n            return {\n              prop: e,\n              evExposed: Ng2Utils.getChangeEventNameExposed(e),\n              evImpl: Ng2Utils.getChangeEventNameImplemented(e)\n            };\n          })\n        };\n        t.push(v);\n      }\n    }\n  };\n  return WjComponentResolvedMetadata;\n}();\nexport { WjComponentResolvedMetadata };\nvar WjDirectiveBehavior = function () {\n  function WjDirectiveBehavior(e, t, i, r) {\n    this._pendingEvents = [];\n    this.isInitialized = !1;\n    this.isDestroyed = !1;\n    this.nzRun = function (e) {\n      return e();\n    };\n    this.directive = e;\n    this.elementRef = t;\n    this.injector = i;\n    this._overrideDirectiveMethods();\n    var n = this.nz = i.get(NgZone);\n    n && (this.nzRun = n.run.bind(n));\n    this.injectedParent = r;\n    var o = this.typeData = e.constructor[WjDirectiveBehavior.directiveTypeDataProp];\n    null == o.siblingId && (o.siblingId = ++WjDirectiveBehavior.siblingDirId + \"\");\n    var s = e.constructor[WjDirectiveBehavior.directiveResolvedTypeDataProp];\n    s ? this.resolvedTypeData = s : e.constructor[WjDirectiveBehavior.directiveResolvedTypeDataProp] = s = this.resolvedTypeData = new WjComponentResolvedMetadata(o);\n    e[WjDirectiveBehavior.BehaviourRefProp] = this;\n    i[WjDirectiveBehavior.BehaviourRefProp] = this;\n    e[WjDirectiveBehavior.isInitializedPropAttr] = !1;\n    this._createEvents();\n    this._setupAsChild();\n    this._isHostElement() && t.nativeElement.setAttribute(WjDirectiveBehavior.siblingDirIdAttr, o.siblingId);\n    this.subscribeToEvents(!1);\n  }\n  WjDirectiveBehavior.getHostElement = function (e, t) {\n    WjDirectiveBehavior.ngZone = t.get(NgZone);\n    return e.nativeElement;\n  };\n  WjDirectiveBehavior.attach = function (e, t, i, r) {\n    return new WjDirectiveBehavior(e, t, i, r);\n  };\n  WjDirectiveBehavior.getZone = function (e) {\n    var t = WjDirectiveBehavior.getBehavior(e);\n    return t && t.nz || WjDirectiveBehavior.ngZone;\n  };\n  WjDirectiveBehavior.prototype.ngOnInit = function () {\n    this.isInitialized = !0;\n    this._initParent();\n    this.subscribeToEvents(!0);\n  };\n  WjDirectiveBehavior.prototype.ngAfterViewInit = function () {\n    var e = this;\n    this.directive[WjDirectiveBehavior.isInitializedPropAttr] = !0;\n    setTimeout(function () {\n      e.isDestroyed || e.directive[WjDirectiveBehavior.initializedEventAttr].emit(void 0);\n    });\n  };\n  WjDirectiveBehavior.prototype.ngOnDestroy = function () {\n    if (!this.isDestroyed) {\n      this.isDestroyed = !0;\n      var e = this.directive;\n      this._siblingInsertedEH && this.elementRef.nativeElement.removeEventListener(\"DOMNodeInserted\", this._siblingInsertedEH);\n      if (this._isChild() && this.parentBehavior) {\n        var t = this.parentBehavior.directive,\n          i = this._getParentProp();\n        if (!this.parentBehavior.isDestroyed && t && i && e) {\n          var r = t[i];\n          if (wijmo.isArray(r) && r) {\n            var n = r.indexOf(e);\n            n >= 0 && r.splice(n, 1);\n          }\n        }\n      }\n      if (e instanceof wijmo.Control && e.hostElement) {\n        var o = this.elementRef.nativeElement,\n          s = o && o.parentNode,\n          a = s ? Array.prototype.indexOf.call(s.childNodes, o) : -1;\n        e.dispose();\n        if (a > -1 && Array.prototype.indexOf.call(s.childNodes, o) < 0) {\n          o.textContent = \"\";\n          a < s.childNodes.length && s.replaceChild(o, s.childNodes[a]);\n        }\n      }\n      this.injector[WjDirectiveBehavior.BehaviourRefProp] = null;\n    }\n  };\n  WjDirectiveBehavior.instantiateTemplate = function (e, t, i, r, n) {\n    void 0 === r && (r = !1);\n    void 0 === n && (n = {});\n    var o,\n      s = t.createEmbeddedView(i, n, t.length),\n      a = s.rootNodes;\n    if (r && 1 === a.length) o = a[0];else {\n      o = document.createElement(\"div\");\n      for (var v = 0, h = a; v < h.length; v++) {\n        var c = h[v];\n        o.appendChild(c);\n      }\n    }\n    e && e.appendChild(o);\n    return {\n      viewRef: s,\n      rootElement: o\n    };\n  };\n  WjDirectiveBehavior.prototype.getPropChangeEvent = function (e) {\n    var t = this.typeData.changeEvents;\n    if (t) for (var i in t) if (t[i].indexOf(e) > -1) return i;\n    return null;\n  };\n  WjDirectiveBehavior.prototype._createEvents = function () {\n    for (var e = 0, t = this.resolvedTypeData.allImplEvents; e < t.length; e++) {\n      var i = t[e];\n      this.directive[i] = new EventEmitter(!1);\n    }\n  };\n  WjDirectiveBehavior.prototype._overrideDirectiveMethods = function () {\n    var e = this.directive;\n    if (e instanceof wijmo.Control) {\n      var t = e._resizeObserverCallback.bind(e);\n      e._resizeObserverCallback = function (e) {\n        NgZone.isInAngularZone() ? t(e) : WjDirectiveBehavior.getZone(this).run(function () {\n          t(e);\n        });\n      }.bind(e);\n    }\n  };\n  WjDirectiveBehavior.prototype.subscribeToEvents = function (e) {\n    var t = this.resolvedTypeData.changeEventMap;\n    e = !!e;\n    for (var i = 0, r = t; i < r.length; i++) {\n      e !== (s = r[i]).event.indexOf(\".\") < 0 && this.addHandlers(s);\n    }\n    if (e) for (var n = 0, o = t; n < o.length; n++) {\n      var s = o[n];\n      this.triggerPropChangeEvents(s, !0);\n    }\n  };\n  WjDirectiveBehavior.prototype.addHandlers = function (e) {\n    var t = this,\n      i = this.directive;\n    WjDirectiveBehavior.evaluatePath(i, e.event).addHandler(function (r, n) {\n      t.nzRun(function () {\n        t.isInitialized && t.triggerPropChangeEvents(e);\n        e.eventImpl && t._triggerEvent(i[e.eventImpl], n, e.props && e.props.length > 0);\n      });\n    });\n  };\n  WjDirectiveBehavior.prototype.triggerPropChangeEvents = function (e, t) {\n    void 0 === t && (t = !0);\n    var i = this.directive;\n    if (e.props && e.props.length) for (var r = 0, n = e.props; r < n.length; r++) {\n      var o = n[r];\n      this._triggerEvent(i[o.evImpl], i[o.prop], t);\n    }\n  };\n  WjDirectiveBehavior.prototype._setupAsChild = function () {\n    if (this._isChild()) {\n      this._isHostElement() && (this.elementRef.nativeElement.style.display = \"none\");\n      this.parentBehavior = WjDirectiveBehavior.getBehavior(this.injectedParent);\n    }\n  };\n  WjDirectiveBehavior.prototype._isAsyncBinding = function () {\n    var e = this.directive[WjDirectiveBehavior.asyncBindingUpdatePropAttr];\n    return null == e ? WjOptions.asyncBindings : e;\n  };\n  WjDirectiveBehavior.prototype._isChild = function () {\n    return this._isParentInitializer() || this._isParentReferencer();\n  };\n  WjDirectiveBehavior.prototype._isParentInitializer = function () {\n    return null != this.directive[WjDirectiveBehavior.parPropAttr];\n  };\n  WjDirectiveBehavior.prototype._isParentReferencer = function () {\n    return !!this.typeData.parentRefProperty;\n  };\n  WjDirectiveBehavior.prototype._getParentProp = function () {\n    return this.directive[WjDirectiveBehavior.parPropAttr];\n  };\n  WjDirectiveBehavior.prototype._getParentReferenceProperty = function () {\n    return this.typeData.parentRefProperty;\n  };\n  WjDirectiveBehavior.prototype._useParentObj = function () {\n    return !1;\n  };\n  WjDirectiveBehavior.prototype._parentInCtor = function () {\n    return this._isParentReferencer() && \"\" == this._getParentReferenceProperty();\n  };\n  WjDirectiveBehavior.prototype._initParent = function () {\n    if (this.parentBehavior && !this._useParentObj()) {\n      var e = this.parentBehavior.directive,\n        t = this._getParentProp(),\n        i = this.directive;\n      if (this._isParentInitializer()) {\n        this._getParentProp();\n        var r = e[t];\n        if (wijmo.isArray(r)) {\n          var n = this._isHostElement(),\n            o = n ? this._getSiblingIndex() : -1;\n          (o < 0 || o >= r.length) && (o = r.length);\n          r.splice(o, 0, i);\n          if (n) {\n            this._siblingInsertedEH = this._siblingInserted.bind(this);\n            this.elementRef.nativeElement.addEventListener(\"DOMNodeInserted\", this._siblingInsertedEH);\n          }\n        } else e[t] = i;\n      }\n      this._isParentReferencer() && !this._parentInCtor() && (i[this._getParentReferenceProperty()] = e);\n    }\n  };\n  WjDirectiveBehavior.prototype._getSiblingIndex = function () {\n    var e = this.elementRef.nativeElement,\n      t = e.parentElement;\n    if (!t) return -1;\n    for (var i = t.childNodes, r = -1, n = this.typeData.siblingId, o = 0; o < i.length; o++) {\n      var s = i[o];\n      if (1 == s.nodeType && s.getAttribute(WjDirectiveBehavior.siblingDirIdAttr) == n) {\n        ++r;\n        if (s === e) return r;\n      }\n    }\n    return -1;\n  };\n  WjDirectiveBehavior.prototype._siblingInserted = function (e) {\n    if (e.target === this.elementRef.nativeElement) {\n      var t = this._getSiblingIndex(),\n        i = this.parentBehavior.directive[this._getParentProp()],\n        r = this.directive,\n        n = i.indexOf(r);\n      if (t >= 0 && n >= 0 && t !== n) {\n        i.splice(n, 1);\n        t = Math.min(t, i.length);\n        i.splice(t, 0, r);\n      }\n    }\n  };\n  WjDirectiveBehavior.prototype._isHostElement = function () {\n    return this.elementRef.nativeElement.nodeType === Node.ELEMENT_NODE;\n  };\n  WjDirectiveBehavior.prototype._triggerEvent = function (e, t, i) {\n    var r = this;\n    if (i && this._isAsyncBinding()) {\n      var n = {\n        event: e,\n        args: t\n      };\n      this._pendingEvents.push(n);\n      null == this._pendingEventsTO && (this._pendingEventsTO = setTimeout(function () {\n        r._triggerPendingEvents(!1);\n      }, 0));\n    } else e.emit(t);\n  };\n  WjDirectiveBehavior.prototype._triggerPendingEvents = function (e) {\n    if (null != this._pendingEventsTO) {\n      clearTimeout(this._pendingEventsTO);\n      this._pendingEventsTO = null;\n    }\n    if (!this.isDestroyed) {\n      var t = [].concat(this._pendingEvents);\n      this._pendingEvents.splice(0, this._pendingEvents.length);\n      for (var i = 0, r = t; i < r.length; i++) {\n        var n = r[i];\n        n.event.emit(n.args);\n      }\n      e && this._pendingEvents.length && this._triggerPendingEvents(!0);\n    }\n  };\n  WjDirectiveBehavior.prototype.flushPendingEvents = function () {\n    this._triggerPendingEvents(!0);\n  };\n  WjDirectiveBehavior.evaluatePath = function (e, t) {\n    this._pathBinding.path = t;\n    return this._pathBinding.getValue(e);\n  };\n  WjDirectiveBehavior.getBehavior = function (e) {\n    return e ? e[WjDirectiveBehavior.BehaviourRefProp] : null;\n  };\n  WjDirectiveBehavior.directiveTypeDataProp = \"meta\";\n  WjDirectiveBehavior.directiveResolvedTypeDataProp = \"_wjResolvedMeta\";\n  WjDirectiveBehavior.BehaviourRefProp = \"_wjBehaviour\";\n  WjDirectiveBehavior.parPropAttr = \"wjProperty\";\n  WjDirectiveBehavior.wjModelPropAttr = \"wjModelProperty\";\n  WjDirectiveBehavior.initializedEventAttr = \"initialized\";\n  WjDirectiveBehavior.isInitializedPropAttr = \"isInitialized\";\n  WjDirectiveBehavior.siblingDirIdAttr = \"wj-directive-id\";\n  WjDirectiveBehavior.asyncBindingUpdatePropAttr = \"asyncBindings\";\n  WjDirectiveBehavior.siblingDirId = 0;\n  WjDirectiveBehavior.wijmoComponentProviderId = \"WjComponent\";\n  WjDirectiveBehavior.outsideZoneEvents = {\n    pointermove: !0,\n    pointerover: !0,\n    mousemove: !0,\n    wheel: !0,\n    touchmove: !0,\n    pointerenter: !0,\n    pointerleave: !0,\n    pointerout: !0,\n    mouseover: !0,\n    mouseenter: !0,\n    mouseleave: !0,\n    mouseout: !0\n  };\n  WjDirectiveBehavior._pathBinding = new wijmo.Binding(\"\");\n  WjDirectiveBehavior.ɵfac = function WjDirectiveBehavior_Factory(t) {\n    ɵngcc0.ɵɵinvalidFactory();\n  };\n  WjDirectiveBehavior.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: WjDirectiveBehavior\n  });\n  return WjDirectiveBehavior;\n}();\nexport { WjDirectiveBehavior };\nvar Ng2Utils = function () {\n  function Ng2Utils() {}\n  Ng2Utils.initEvents = function (e, t) {\n    for (var i = [], r = 0, n = t; r < n.length; r++) {\n      var o = n[r],\n        s = o.props;\n      o.event && o.eventImpl && i.push(o.eventImpl + \":\" + o.event);\n      if (s && s.length) for (var a = 0, v = s; a < v.length; a++) {\n        var h = v[a];\n        i.push(h.evImpl + \":\" + h.evExposed);\n      }\n    }\n    return i;\n  };\n  Ng2Utils.getChangeEventNameImplemented = function (e) {\n    return Ng2Utils.getChangeEventNameExposed(e) + Ng2Utils.changeEventImplementSuffix;\n  };\n  Ng2Utils.getChangeEventNameExposed = function (e) {\n    return e + \"Change\";\n  };\n  Ng2Utils.getWjEventNameImplemented = function (e) {\n    return e + Ng2Utils.wjEventImplementSuffix;\n  };\n  Ng2Utils.getWjEventName = function (e) {\n    if (e) {\n      var t = Ng2Utils.wjEventImplementSuffix,\n        i = e.length - t.length;\n      if (i > 0 && e.substr(i) === t) return e.substr(0, i);\n    }\n    return null;\n  };\n  Ng2Utils.getBaseType = function (e) {\n    var t;\n    return e && (t = Object.getPrototypeOf(e.prototype)) && t.constructor;\n  };\n  Ng2Utils.getAnnotations = function (e) {\n    return Reflect.getMetadata(\"annotations\", e);\n  };\n  Ng2Utils.getAnnotation = function (e, t) {\n    if (t && e) for (var i = 0, r = e; i < r.length; i++) {\n      var n = r[i];\n      if (n instanceof t) return n;\n    }\n    return null;\n  };\n  Ng2Utils.getTypeAnnotation = function (e, t, i) {\n    for (var r = e; r; r = i ? null : Ng2Utils.getBaseType(r)) {\n      var n = Ng2Utils.getAnnotation(Ng2Utils.getAnnotations(r), t);\n      if (n) return n;\n    }\n    return null;\n  };\n  Ng2Utils.equals = function (e, t) {\n    return e != e && t != t || wijmo.DateTime.equals(e, t) || e === t;\n  };\n  Ng2Utils._copy = function (e, t, i, r, n) {\n    if (e && t) for (var o in t) if (r || \"_\" !== o[0]) {\n      var s = t[o];\n      if (!n || n(o, s)) {\n        var a = e[o];\n        wijmo.isArray(s) ? e[o] = (!wijmo.isArray(a) || i ? [] : a).concat(s) : void 0 !== s && (e[o] = s);\n      }\n    }\n  };\n  Ng2Utils.changeEventImplementSuffix = \"PC\";\n  Ng2Utils.wjEventImplementSuffix = \"Ng\";\n  return Ng2Utils;\n}();\nexport { Ng2Utils };\nvar WjValueAccessor = function () {\n  function WjValueAccessor(e) {\n    this._writeQnt = 0;\n    this._isSubscribed = !1;\n    this._dirUpdateQnt = 0;\n    this._onChange = function (e) {};\n    this._onTouched = function () {};\n    this._directive = e;\n    this._behavior = WjDirectiveBehavior.getBehavior(e);\n  }\n  WjValueAccessor.prototype.writeValue = function (e) {\n    var t = this;\n    this._modelValue = e;\n    ++this._writeQnt;\n    if (this._directive.isInitialized) {\n      this._ensureInitEhUnsubscribed();\n      this._updateDirective();\n    } else if (!this._dirInitEh) {\n      var i = this._directive.initialized;\n      this._dirInitEh = i.subscribe(function () {\n        t._updateDirective();\n        t._ensureInitEhUnsubscribed();\n      });\n    }\n  };\n  WjValueAccessor.prototype.registerOnChange = function (e) {\n    this._onChange = e;\n  };\n  WjValueAccessor.prototype.registerOnTouched = function (e) {\n    this._onTouched = e;\n  };\n  WjValueAccessor.prototype.setDisabledState = function (e) {\n    var t = this._directive;\n    t instanceof wijmo.Control && (t.isDisabled = e);\n  };\n  WjValueAccessor.prototype._updateDirective = function () {\n    if (!this._isFirstChange() || null != this._modelValue) {\n      this._ensureNgModelProp();\n      if (this._directive && this._ngModelProp) {\n        var e = this._modelValue;\n        \"\" === e && (e = null);\n        this._dirUpdateQnt++;\n        try {\n          this._directive[this._ngModelProp] = e;\n        } finally {\n          this._dirUpdateQnt--;\n        }\n      }\n      this._ensureSubscribed();\n    }\n  };\n  WjValueAccessor.prototype._ensureSubscribed = function () {\n    if (!this._isSubscribed) {\n      var e = this._directive;\n      if (e) {\n        this._ensureNgModelProp();\n        var t = this._ngModelProp = e[WjDirectiveBehavior.wjModelPropAttr];\n        if (t) {\n          var i = this._behavior.getPropChangeEvent(t);\n          i && e[i].addHandler(this._dirValChgEh, this);\n        }\n        e instanceof wijmo.Control && e.lostFocus.addHandler(this._dirLostFocusEh, this);\n        this._isSubscribed = !0;\n      }\n    }\n  };\n  WjValueAccessor.prototype._ensureNgModelProp = function () {\n    !this._ngModelProp && this._directive && (this._ngModelProp = this._directive[WjDirectiveBehavior.wjModelPropAttr]);\n  };\n  WjValueAccessor.prototype._ensureInitEhUnsubscribed = function () {\n    if (this._dirInitEh) {\n      this._dirInitEh.unsubscribe();\n      this._dirInitEh = null;\n    }\n  };\n  WjValueAccessor.prototype._isFirstChange = function () {\n    return this._writeQnt < 2;\n  };\n  WjValueAccessor.prototype._dirValChgEh = function (e, t) {\n    if (this._onChange && this._directive && this._ngModelProp) {\n      var i = this._directive[this._ngModelProp],\n        r = this._modelValue;\n      \"\" === r && (r = null);\n      if (!(this._dirUpdateQnt > 0 && _isNullOrEmpty(r) && _isNullOrEmpty(i) || Ng2Utils.equals(r, i)) || wijmo.isArray(i)) {\n        this._modelValue = i;\n        this._onChange(i);\n      }\n    }\n  };\n  WjValueAccessor.prototype._dirLostFocusEh = function (e, t) {\n    this._onTouched && this._onTouched();\n  };\n  return WjValueAccessor;\n}();\nexport { WjValueAccessor };\nexport function WjValueAccessorFactory(e) {\n  return new WjValueAccessor(e);\n}\nfunction _isNullOrEmpty(e) {\n  return null == e || \"\" === e;\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}